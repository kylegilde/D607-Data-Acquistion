---
title: "D607 Week 2 - Regex Problems"
author: "Kyle Gilde"
date: "Feb. 12, 2017"
output: 
  html_document:
    toc: true
    #code_folding: hide
---
<style>
div.beige pre { background-color:beige; }
</style>
 <div class = "beige">

#The Task
Please deliver links to an R Markdown file (in GitHub and rpubs.com) with solutions to problems 3 and 4 from chapter 8 of Automated Data Collection in R.  Problem 9 is extra credit.  




#Load Packages
```{r setup, results='hide'} 
knitr::opts_chunk$set(#echo=FALSE, 
                      warning=FALSE, 
                      message=FALSE,
                      tidy=TRUE,
                      #comment = "",
                      dev="png", 
                      dev.args=list(type="cairo"))

#https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf

load.packages <- c("RCurl", "knitr", "tesseract","stringr","htmlTable")


ipak <- function(pkg){
    #FUNCTION SOURCE: https://gist.github.com/stevenworthington/3178163
    new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
    if (length(new.pkg)) 
        install.packages(new.pkg, dependencies = TRUE)
    sapply(pkg, require, character.only = TRUE)
}
ipak(load.packages)
```


#Just for fun: Use optical character recognition pkg to get the text off of the textbook image
```{r ocr}
text <- ocr("https://raw.githubusercontent.com/kylegilde/D607-Data-Acquistion/master/week3_problems.jpg")
my.list <- unlist(strsplit(text, "\n"))


```



#Problem 3
Use the tools of this chap'er to rearrange Khe Vector so mat all elements conform to the standard First_name last_name.
```{r 3}

# sub("fopy","Copy", my.list[1])
# cat(my.list[5], sub("Jv","_n", my.list[6]))

raw.data <-"555-1239Moe Szyslak(636) 555-0113Burns, C. Montgomery555-6542Rev. Timothy Lovejoy555 8904Ned Flanders636-555-3226Simpson, Homer5553642Dr. Julius Hibbert" 

names <- unlist(str_extract_all(raw.data, "[[:alpha:]., ]{2,}"))
names_df <- data.frame(names, stringsAsFactors = FALSE)
names_df$first_half <- str_trim(str_replace(str_extract(names_df$names,"(, ).+"),",",""))
names_df$last_half <- str_trim(str_replace(str_extract(names_df$names,".+(, )"),",",""))
names_df$first_last_name <- ifelse(is.na(names_df$first_half),names_df$names, str_c(names_df$first_half, " ",names_df$last_half))
kable(names_df$first_last_name, col.names = "Normalized Names")



str_replace(my.list[7],"Lew","i.e.")
regex1 <- "[[:alpha:]]{2,3}\\."

kable(str_detect(names_df$first_last_name, regex1), col.names = "Has Title")

my.list[8]
regex2 <- "^[[:alpha:]]\\.\\s"
kable(str_detect(names_df$first_last_name, regex2), col.names = "Has 2nd Name", caption="I think this is referring to Mr. Burns' first initial")

```

#Problem 4
Describe the types of strings that conform to the following regular expressions and construct an example that is matched by the regular expression."                                                  
a. [e-s]+\\\\$      
```{r 4a}
#my.list[9:15]

```

b. \\\\b[a-z]{1,4}\\\\b"      
```{r 4a}

```
c. '?\\\\Vtxt$"           
```{r 4a}

```
d. \\\\d{Z)/\\\\d{2}/\\\\d(A}"    
```{r 4a}

```
e. <(.+?)>.+?</\\\\1>"  
```{r 4e}

subset

```


#Problem 9
One following code hides a secret message, Crack it whh R and regular expressions. Hint: Some of the 
characters are more revealing than others
```{r 9}
jibberish <- getURL("http://www.r-datacollection.com/materials/regex/code_exercise.txt")
answer <- unlist(str_extract_all(jibberish, "[A-Z.]"))
cat(str_replace(answer,"\\."," "))
```
</div>
