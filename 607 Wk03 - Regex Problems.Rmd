---
title: "D607 Week 2 - Regex Problems"
author: "Kyle Gilde"
date: "Feb. 12, 2017"
output: 
  html_document:
    toc: true
    #code_folding: hide
---
<style>
div.beige pre { background-color:beige; }
</style>
 <div class = "beige">

#The Task
Please deliver links to an R Markdown file (in GitHub and rpubs.com) with solutions to problems 3 and 4 from chapter 8 of Automated Data Collection in R.  Problem 9 is extra credit.  

http://www.r-datacollection.com/materials/regex/code_exercise.txt


#Load Packages
```{r setup, results='hide'} 
knitr::opts_chunk$set(#echo=FALSE, 
                      warning=FALSE, 
                      message=FALSE,
                      tidy=TRUE,
                      #comment = "",
                      dev="png", 
                      dev.args=list(type="cairo"))

#https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf

load.packages <- c("RCurl", "knitr", "tesseract","stringr")


ipak <- function(pkg){
    #FUNCTION SOURCE: https://gist.github.com/stevenworthington/3178163
    new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
    if (length(new.pkg)) 
        install.packages(new.pkg, dependencies = TRUE)
    sapply(pkg, require, character.only = TRUE)
}
ipak(load.packages)
```


#Just for fun: Use optical character recognition pkg on the textbook image
```{r ocr}
text <- ocr("https://raw.githubusercontent.com/kylegilde/D607-Data-Acquistion/master/week3_problems.jpg")
my.list <- unlist(strsplit(text, "\n"))

my.list

```



#Problem 3
```{r 3}

sub("fopy","Copy", my.list[1])
cat(my.list[5], sub("Jv","_n", my.list[6]))

raw.data <-"555-1239Moe Szyslak(636) 555-0113Burns, C. Montgomery555-6542Rev. Timothy Lovejoy555 8904Ned Flanders636-555-3226Simpson, Homer5553642Dr. Julius Hibbert" 

names <- unlist(str_extract_all(raw.data, "[[:alpha:]., ]{2,}"))
# [1] "Moe Szyslak"          "Burns, C. Montgomery" "Rev. Timothy Lovejoy" "Ned Flanders"        
# [5] "Simpson, Homer"       "Dr. Julius Hibbert"  
names$v1 <- as.data.frame(names, stringAsFactors=F)
str_split
str(names)
class(names)

str_sub(names$v1, str_locate(names,","))
str_extract(names,"(, ).+")
str_extract(names,".+(, )")


str_detect(names, ",")
str_split_fixed(names,",")






my.list[7]
str_detect(names, "[[:alpha:]]{2,3}\\.")

my.list[8]
str_detect(names, "[[:alpha:]]?[^.]")

```

#List the Tables
```{r 4}

```


#Join all tables into one aggregate table. View the 1st 10 rows.
```{r aggtable}

```

#The rating scores are 1 through 5, 1 being the lowest score.
```{r ratings}


```


#Which movie received the highest average rating from my friends?
```{r highest_rating}

```

#Which of my friends gave out the lowest ratings on average?

```{r most_critical_friend}

```




# Disconnect from DB
```{r disconnect, results='hide'}


```



</div>
